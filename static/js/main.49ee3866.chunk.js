(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{117:function(e,t,a){},123:function(e,t,a){e.exports=a(249)},128:function(e,t,a){},133:function(e,t,a){},135:function(e,t,a){},141:function(e,t){},143:function(e,t){},176:function(e,t){},177:function(e,t){},183:function(e,t){},243:function(e,t,a){},244:function(e,t,a){},245:function(e,t,a){},246:function(e,t,a){},247:function(e,t,a){},249:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(51),i=a.n(c),s=a(73),o=(a(128),a(14)),l=a(29),u=(a(133),a(5)),m=a.n(u),d=a(37),p=a(7),h=a(8),f=a(10),g=a(9),v=a(6),b=a(11),y=(a(135),a(122)),E=a(53),O=function(){return JSON.parse(localStorage.getItem("ranking"))},N=function(){return JSON.parse(localStorage.getItem("state"))},j=function(e,t){var a=N(),n=e.isCorrect?10+Number(t)*e.difficulty:0;a.player.score+=n,a.player.assertions+=0!==n?1:0,localStorage.setItem("state",JSON.stringify(a)),function(e){var t=e.player,a=t.score,n=t.name,r=O(),c=r[r.length-1];c.score=a;var i=r.map((function(e){return n===e.name?c:e}));localStorage.setItem("ranking",JSON.stringify(i))}(a)},S=function(e){var t={player:{name:e.name,assertions:0,score:0,gravatarEmail:e.email}};localStorage.setItem("state",JSON.stringify(t));var a=O(),n={name:t.player.name,picture:"https://www.gravatar.com/avatar/".concat(Object(E.MD5)(t.gravatarEmail).toString()),score:t.player.score};if(a){var r=[].concat(Object(y.a)(a),[n]);return localStorage.setItem("ranking",JSON.stringify(r))}var c=[];return c.push(n),localStorage.setItem("ranking",JSON.stringify(c))},w=function(e,t){var a=e[t].incorrect_answers;a.splice(Math.floor(Math.random()*(e.length-1)),0,e[t].correct_answer);return a.map((function(a){return{item:a,border:"",isDisabled:!1,isCorrect:a===e[t].correct_answer,difficulty:("easy"===e[t].difficulty?1:"medium"===e[t].difficulty&&2)||"hard"===e[t].difficulty&&3}}))},k=function(e){var t,a,n,r,c,i,s;return m.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.howMuch,a=e.category,n=e.difficulty,r=e.type,c=localStorage.getItem("token"),o.next=4,m.a.awrap(fetch("https://opentdb.com/api.php?amount=".concat(t,"&category=").concat(a,"&difficulty=").concat(n,"&type=").concat(r,"&token=").concat(c)));case 4:return i=o.sent,o.next=7,m.a.awrap(i.json());case 7:return s=o.sent,o.abrupt("return",s);case 9:case"end":return o.stop()}}))},x=function(){var e,t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(fetch("https://opentdb.com/api_category.php"));case 2:return e=a.sent,a.next=5,m.a.awrap(e.json());case 5:return t=a.sent,a.abrupt("return",t);case 7:case"end":return a.stop()}}))},I=function(){var e,t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 2:return e=a.sent,a.next=5,m.a.awrap(e.json());case 5:return t=a.sent,a.abrupt("return",t);case 7:case"end":return a.stop()}}))},T=function(e){return{type:"HANDLE_ANSWER",payload:e}},C=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={name:"",email:""},a.handleInput=a.handleInput.bind(Object(v.a)(a)),a.handleClick=a.handleClick.bind(Object(v.a)(a)),a.btnJogar=a.btnJogar.bind(Object(v.a)(a)),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.setCategoriesAPI)()}},{key:"handleInput",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(d.a)({},a,n))}},{key:"handleClick",value:function(){var e,t,a,n,r,c,i,s;return m.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=this.props,t=e.history,a=e.setUser,n=e.setTokenAPI,r=e.chosedSettings,c=this.state,i=c.name,s=c.email,a({name:i,email:s}),o.next=5,m.a.awrap(n(r));case 5:S({name:i,email:s}),t.push("/jogo");case 7:case"end":return o.stop()}}),null,this)}},{key:"btnJogar",value:function(){var e=this.state,t=e.name;return e.email.length>=1&&t.length>=1}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=this.props.history;return r.a.createElement("main",{className:"containner-login-main"},r.a.createElement("img",{className:"logo",src:"/trivia.png",alt:"d"}),r.a.createElement("form",{className:"card-login"},r.a.createElement("h3",null,"Nome Do Jogador:"),r.a.createElement("input",{className:"input-login input-name",placeholder:"Name:",value:t,onChange:this.handleInput,type:"text",name:"name","data-testid":"input-player-name"}),r.a.createElement("h3",{className:"text-email-gravatar"},"Email Do Gravatar:"),r.a.createElement("input",{placeholder:"Email:",className:"input-login",value:a,onChange:this.handleInput,type:"text",name:"email","data-testid":"input-gravatar-email"}),r.a.createElement("button",{className:this.btnJogar()?"btn-jogar":"btn-jogar-desab",type:"button","data-testid":"btn-play",disabled:!this.btnJogar(),onClick:this.handleClick},"Jogar"),r.a.createElement("button",{className:"btn-config","data-testid":"btn-settings",type:"button",onClick:function(){return n.push("/settings")}},"configura\xe7\xe3o do jogo")))}}]),t}(n.Component),_=Object(o.b)((function(e){return{chosedSettings:e.settings.chosedSettings}}),(function(e){return{setUser:function(t){return e(function(e){return{type:"SET_USER",payload:e}}(t))},setTokenAPI:function(t){return e((a=t,function(e){var t,n;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,m.a.awrap(I());case 2:return t=r.sent,localStorage.setItem("token",t.token),r.next=6,m.a.awrap(k(a));case 6:n=r.sent,e({type:"SET_QUESTIONS",payload:n});case 8:case"end":return r.stop()}}))}));var a},setCategoriesAPI:function(){return e((function(e){var t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(x());case 2:t=a.sent,e({type:"SET_CATEGORIES",payload:t});case 4:case"end":return a.stop()}}))}))}}}))(C),q=(a(243),function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(f.a)(this,Object(g.a)(t).call(this))).imgGravatar=e.imgGravatar.bind(Object(v.a)(e)),e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"imgGravatar",value:function(e){return"https://www.gravatar.com/avatar/"+Object(E.MD5)(e).toString()}},{key:"render",value:function(){var e=this.props,t=e.getEmail,a=e.getName;return r.a.createElement("header",{className:"header-containner"},r.a.createElement("div",{className:"img-name"},r.a.createElement("img",{className:"gravatar-img","data-testid":"header-profile-picture",src:this.imgGravatar(t),alt:"Gravatar do player"}),r.a.createElement("p",{className:"name-user","data-testid":"header-player-name"},a)),r.a.createElement("div",{className:"text-score"},r.a.createElement("p",{className:"score"},"Score"),r.a.createElement("p",{className:"score","data-testid":"header-score"},JSON.parse(localStorage.getItem("state")).player.score||0)))}}]),t}(n.Component)),A=Object(o.b)((function(e){return{getEmail:e.user.email,getName:e.user.name,score:e.game.score}}))(q),M=function(e){return{type:"UPDATE_TIMER",payload:e}},J=(a(244),function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(f.a)(this,Object(g.a)(t).call(this))).state={interval:null,timer:30},e.verifyTimer=e.verifyTimer.bind(Object(v.a)(e)),e.setStateInterval=e.setStateInterval.bind(Object(v.a)(e)),e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.setStateInterval()}},{key:"setStateInterval",value:function(){var e=this;this.setState({interval:setInterval((function(){e.setState((function(e){return{timer:e.timer-1}}),(function(){return e.verifyTimer()}))}),1e3)})}},{key:"verifyTimer",value:function(){var e=this.props,t=e.questionTimer.timerIsOn,a=e.updateTimer,n=e.handleUserAnswer,r=this.state,c=r.interval,i=r.timer;return 0!==i&&t?a({timerValue:i,timerIsOn:!0}):(a({timerValue:i,timerIsOn:!1}),n(),clearInterval(c))}},{key:"render",value:function(){var e=this.state.timer;return r.a.createElement("div",{className:"circular"},r.a.createElement("div",{className:"inner"}),r.a.createElement("div",{className:"outer"}),r.a.createElement("div",{className:"numb"},e),r.a.createElement("div",{className:"circle"},r.a.createElement("div",{className:"dot"},r.a.createElement("span",null)),r.a.createElement("div",{className:"bar left"},r.a.createElement("div",{className:"progress"})),r.a.createElement("div",{className:"bar right"},r.a.createElement("div",{className:"progress"}))))}}]),t}(n.Component)),R=Object(o.b)((function(e){return{questionTimer:e.questionTimer}}),(function(e){return{updateTimer:function(t){return e(M(t))},handleUserAnswer:function(){return e(T())}}}))(J),D=(a(245),function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(f.a)(this,Object(g.a)(t).call(this))).answerButtons=e.answerButtons.bind(Object(v.a)(e)),e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"answerButtons",value:function(e){var t=this.props,a=t.game.answers,n=t.handleResponse;return a.map((function(t,a){return t.item===e.correct_answer?r.a.createElement("li",{key:a},r.a.createElement("button",{value:a,type:"button","data-testid":"correct-answer",disabled:t.isDisabled,onClick:n,style:{border:t.border}},t.item)):r.a.createElement("li",{key:a},r.a.createElement("button",{type:"button","data-testid":"wrong-answer-".concat(a),value:a,disabled:t.isDisabled,onClick:n,style:{border:t.border}},t.item))}))}},{key:"render",value:function(){var e=this.props,t=e.game,a=t.questions,n=t.index,c=t.nextQuestionBtn,i=e.handleNextQuestion,s=e.questionTimer,o=s.timerIsOn,l=s.timerValue,u=a[n];return r.a.createElement("div",{className:"background"},r.a.createElement("section",{className:"containner-section-question"},r.a.createElement("div",{className:"card-question"},o?r.a.createElement(R,null):r.a.createElement("div",{className:"circular"},r.a.createElement("div",{className:"inner"}),r.a.createElement("div",{className:"outer"}),r.a.createElement("div",{className:"numb"},l),r.a.createElement("div",{className:"circle",style:{backgroundColor:"#273746"}})),r.a.createElement("h3",{"data-testid":"question-category"},u.category),r.a.createElement("p",{"data-testid":"question-text"},u.question)),r.a.createElement("div",{className:"card-options",id:"answers"},r.a.createElement("ul",null,this.answerButtons(u)))),c&&r.a.createElement("button",{className:"btn-next",onClick:i,type:"button","data-testid":"btn-next"},"Pr\xf3xima"))}}]),t}(n.Component)),Q=Object(o.b)((function(e){return{game:e.game,questionTimer:e.questionTimer}}),null)(D),U=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(f.a)(this,Object(g.a)(t).call(this))).handleResponse=e.handleResponse.bind(Object(v.a)(e)),e.handleNextQuestion=e.handleNextQuestion.bind(Object(v.a)(e)),e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.game,a=t.questions,n=t.index,r=e.setAnswers,c=e.history;if(0===a.length)return c.push("/");r(w(a,n))}},{key:"handleResponse",value:function(e){var t=e.target.value,a=this.props,n=a.handleUserAnswer,r=a.game.answers,c=a.questionTimer;(0,a.updateTimer)({timerValue:c.timerValue,timerIsOn:!1}),j(r[t],c.timerValue),n()}},{key:"handleNextQuestion",value:function(){var e=this.props,t=e.game,a=t.questions,n=t.index,r=e.setAnswers,c=e.history,i=e.nextQuestion,s=e.updateTimer;return i(),s({timerValue:30,timerIsOn:!0}),n+1!==a.length?r(w(a,n+1)):c.push("/feedback")}},{key:"render",value:function(){var e=this.props.game.infoIsLoaded;return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement("main",null,e&&r.a.createElement(Q,{handleNextQuestion:this.handleNextQuestion,handleResponse:this.handleResponse})))}}]),t}(n.Component),V=Object(o.b)((function(e){return{game:e.game,questionTimer:e.questionTimer}}),(function(e){return{setAnswers:function(t){return e(function(e){return{type:"SET_ANSWERS",payload:e}}(t))},handleUserAnswer:function(){return e(T())},nextQuestion:function(){return e({type:"NEXT_QUESTION",payload:t});var t},updateTimer:function(t){return e(M(t))}}}))(U),B=(a(117),function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.handleChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"howMuch"},"Quantity:",r.a.createElement("select",{className:"quantity-select",name:"howMuch",id:"howMuch",onChange:e},r.a.createElement("option",{name:"howMuch",value:"5"},"5"),r.a.createElement("option",{name:"howMuch",value:"10"},"10"),r.a.createElement("option",{name:"howMuch",value:"15"},"15"),r.a.createElement("option",{name:"howMuch",value:"20"},"20"))),r.a.createElement("label",{htmlFor:"difficulty"},"Difficulty:",r.a.createElement("select",{className:"difficulty-select",name:"difficulty",id:"difficulty",onChange:e},r.a.createElement("option",{name:"difficulty",value:""},"Any"),r.a.createElement("option",{name:"difficulty",value:"easy"},"Easy"),r.a.createElement("option",{name:"difficulty",value:"medium"},"Medium"),r.a.createElement("option",{name:"difficulty",value:"hard"},"Hard"))),r.a.createElement("label",{htmlFor:"type"},"Type:",r.a.createElement("select",{className:"type-select",name:"type",id:"type",onChange:e},r.a.createElement("option",{name:"type",value:""},"Any"),r.a.createElement("option",{name:"type",value:"boolean"},"True / False"),r.a.createElement("option",{name:"type",value:"multiple"},"multiple choise"))))}}]),t}(n.Component)),G=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(f.a)(this,Object(g.a)(t).call(this))).state={howMuch:5,category:"",difficulty:"",type:""},e.handleChange=e.handleChange.bind(Object(v.a)(e)),e.saveSettings=e.saveSettings.bind(Object(v.a)(e)),e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(d.a)({},a,n))}},{key:"saveSettings",value:function(){var e=this.state,t=e.howMuch,a=e.category,n=e.difficulty,r=e.type,c=this.props,i=c.history;(0,c.setNewSettings)({howMuch:t,category:a,difficulty:n,type:r}),i.push("/")}},{key:"render",value:function(){var e=this.props.settings.categories;return r.a.createElement("main",{className:"main-containner"},r.a.createElement("h2",{className:"text-settings","data-testid":"settings-title"}," Settings "),r.a.createElement("img",{className:"img-engrenagem",src:"/engrenagem.png",alt:"imagem de engrenagem"}),r.a.createElement("form",{className:"containner-settings-form"},r.a.createElement("label",{htmlFor:"category"},"Category:",r.a.createElement("select",{className:"category-select",name:"category",id:"category",onChange:this.handleChange},r.a.createElement("option",{name:"category",value:""},"Any"),e.map((function(e){return r.a.createElement("option",{key:e.id,name:"category",value:e.id},e.name)})))),r.a.createElement(B,{handleChange:this.handleChange})),r.a.createElement("button",{type:"button",onClick:this.saveSettings},"Save Settings"))}}]),t}(n.Component),W=Object(o.b)((function(e){return{settings:e.settings}}),(function(e){return{setNewSettings:function(t){return e(function(e){return{type:"SET_NEW_SETTINGS",payload:e}}(t))}}}))(G),F=(a(246),function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=N().player,t=e.assertions,a=e.score,n=t>=3?"Mandou bem!":"Podia ser melhor...",c=this.props.history;return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement("main",{className:"containner-main-feedback"},r.a.createElement("div",{className:"card-feedback"},r.a.createElement("div",{className:"card-text-contains"},r.a.createElement("h4",{"data-testid":"feedback-text"},n)),r.a.createElement("div",{className:"card-text-contains"},r.a.createElement("h4",null,"Score:"),r.a.createElement("h4",{"data-testid":"feedback-total-score"},a)),r.a.createElement("div",{className:"card-text-contains"},r.a.createElement("h4",null,"successes:"),r.a.createElement("h4",{"data-testid":"feedback-total-question"},t)),r.a.createElement("div",{className:"containner-btn-feedback"},r.a.createElement("button",{type:"button","data-testid":"btn-play-again",onClick:function(){return c.push("/")}},"Jogar novamente"),r.a.createElement("button",{onClick:function(){return c.push("/ranking")},type:"button","data-testid":"btn-ranking"},"Ver Ranking")))))}}]),t}(n.Component)),P=(a(247),function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("ranking"));e.sort((function(e,t){return t.score-e.score}));var t=this.props.history;return r.a.createElement("main",{className:"main-containner-ranking"},r.a.createElement("h2",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement("div",{className:"containner-btn"},r.a.createElement("button",{className:"btn-ranking",onClick:function(){return t.push("/")},type:"button","data-testid":"btn-go-home"},"Voltar")),r.a.createElement("div",{className:"containner-podio"},e.slice(0,3).map((function(e,t){return r.a.createElement("div",{className:"podio-space",key:t},r.a.createElement("img",{className:"img-gravatar".concat(t),src:e.picture,alt:"gravatar"}),r.a.createElement("p",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("div",{className:"position".concat(t)},r.a.createElement("p",{"data-testid":"player-score-".concat(t)},e.score),r.a.createElement("div",{className:"img-podio".concat(t)})))}))),r.a.createElement("section",{className:"containner-raking-geral"},e.slice(3).map((function(e,t){return r.a.createElement("div",{className:"card-podio",key:t+3},r.a.createElement("img",{src:e.picture,alt:"raking"}),r.a.createElement("div",{className:"infor-player-containner"},r.a.createElement("h3",{"data-testid":"player-name-".concat(t+3)},e.name),r.a.createElement("span",{"data-testid":"player-score-".concat(t+3)},e.score)))}))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=a(28),H=a(120),X=a(121),$=a(20),z={email:"",name:""},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":var a=t.payload,n=a.email,r=a.name;return Object($.a)({},e,{email:n,name:r});default:return e}},Y={questions:[],index:0,infoIsLoaded:!1,answers:[],nextQuestionBtn:!1,score:0},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUESTIONS":return Object($.a)({},e,{score:0,questions:t.payload.results,infoIsLoaded:!0});case"SET_ANSWERS":return Object($.a)({},e,{answers:t.payload});case"HANDLE_ANSWER":return Object($.a)({},e,{score:JSON.parse(localStorage.getItem("state")).player.score,nextQuestionBtn:!0,answers:e.answers.map((function(e){return e.border=e.isCorrect?"3px solid rgb(6, 240, 15)":"3px solid rgb(255, 0, 0)",e.isDisabled=!0,e}))});case"NEXT_QUESTION":return Object($.a)({},e,{nextQuestionBtn:!1,index:e.index===e.questions.length-1?0:e.index+1});default:return e}},ee={categories:[],chosedSettings:{howMuch:5,category:"",difficulty:"",type:""}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CATEGORIES":return Object($.a)({},e,{categories:t.payload.trivia_categories});case"SET_NEW_SETTINGS":return Object($.a)({},e,{chosedSettings:t.payload});default:return e}},ae={timerValue:30,timerIsOn:!0},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_TIMER":return Object($.a)({},e,{timerValue:t.payload.timerValue,timerIsOn:t.payload.timerIsOn});default:return e}},re=Object(L.combineReducers)({user:K,game:Z,settings:te,questionTimer:ne}),ce=Object(L.createStore)(re,Object(X.composeWithDevTools)(Object(L.applyMiddleware)(H.a)));window.Cypress&&(window.store=ce);var ie=ce;i.a.render(r.a.createElement(o.a,{store:ie},r.a.createElement(s.a,null,r.a.createElement((function(){return r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:_}),r.a.createElement(l.a,{path:"/jogo",component:V}),r.a.createElement(l.a,{path:"/settings",component:W}),r.a.createElement(l.a,{path:"/feedback",component:F}),r.a.createElement(l.a,{path:"/ranking",component:P}))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[123,1,2]]]);
//# sourceMappingURL=main.49ee3866.chunk.js.map